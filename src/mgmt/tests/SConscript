"""Build daos mgmt tests"""


def scons():
    """Execute build"""
    Import('senv', 'pb_objs')

    senv.Append(CPPDEFINES={'DRPC_TEST': '1'})
    # Isolated unit tests
    senv.d_test_program(source=['srv_drpc_tests.c', pb_objs, 'mocks.c', '../srv_drpc.c'],
                        LIBS=['cmocka', 'protobuf-c', 'daos_common_pmem', 'gurt', 'uuid'])


if __name__ == "SCons.Script":
    scons()
