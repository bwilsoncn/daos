# (C) Copyright 2021-2022 Intel Corporation.
#
# SPDX-License-Identifier: BSD-2-Clause-Patent
#
"""Build crt_utils component"""


def scons():
    """Scons function"""

    Import('env', 'conf_dir')

    denv = env.Clone()
    denv.d_add_requires('protobufc')
    denv.d_add_build_rpath()

    # Generate cart utility shared objects
    cart_utils_objs = denv.SharedObject('crt_utils.c', SHOBJPREFIX='s_')
    Export('cart_utils_objs')

    denv.Install(conf_dir, ['memcheck-cart.supp', 'fault-inject-cart.yaml'])


if __name__ == "SCons.Script":
    scons()
